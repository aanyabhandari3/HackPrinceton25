<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Center Impact Analyzer</title>
    
    <!-- Mapbox GL JS -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet" />
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-brand">
            <span class="navbar-logo">üåê</span>
            <span class="navbar-title">Data Center Impact Analyzer</span>
        </div>
        <div class="navbar-menu">
            <a href="#" class="navbar-link active" onclick="switchView('analyze')">Analyze</a>
            <a href="#" class="navbar-link" onclick="switchView('forecast')">Forecast</a>
            <a href="#" class="navbar-link" onclick="switchView('about')">About</a>
        </div>
        <div class="navbar-actions">
            <button class="navbar-btn" onclick="exportReport()">
                üì• Export Report
            </button>
        </div>
    </nav>

    <!-- Main Layout Container -->
    <div class="layout-container">
        <!-- Analyze View -->
        <div id="analyze-view" class="view-container active">
        <!-- Left Panel: Configuration -->
        <div class="left-panel">
        <h2 class="panel-title">‚öôÔ∏è Configuration</h2>
        <p class="subtitle">Configure your data center specifications</p>

        <!-- Data Center Size Presets -->
        <div class="section">
            <div class="section-title">Select Size Preset</div>
            <div class="preset-grid">
                <button class="preset-btn active" data-size="small">
                    <span class="name">Small</span>
                    <span class="power">1 MW ‚Ä¢ 100 servers</span>
                </button>
                <button class="preset-btn" data-size="medium">
                    <span class="name">Medium</span>
                    <span class="power">10 MW ‚Ä¢ 1,000 servers</span>
                </button>
                <button class="preset-btn" data-size="large">
                    <span class="name">Large</span>
                    <span class="power">50 MW ‚Ä¢ 10,000 servers</span>
                </button>
                <button class="preset-btn" data-size="mega">
                    <span class="name">Mega</span>
                    <span class="power">150 MW ‚Ä¢ 50,000 servers</span>
                </button>
            </div>

            <button class="toggle-custom" onclick="toggleCustom()">
                ‚öôÔ∏è Custom Configuration
            </button>

            <!-- Custom Configuration Form -->
            <div id="custom-config" class="custom-config">
                <div class="form-group">
                    <label>‚ö° Power (MW)</label>
                    <input type="number" id="power_mw" value="1" min="0.1" step="0.1">
                </div>
                <div class="form-group">
                    <label>üñ•Ô∏è Number of Servers</label>
                    <input type="number" id="servers" value="100" min="1">
                </div>
                <div class="form-group">
                    <label>üìè Size (sq ft)</label>
                    <input type="number" id="square_feet" value="5000" min="100">
                </div>
                <div class="form-group">
                    <label>üíß Water Usage (gal/day)</label>
                    <input type="number" id="water" value="25000" min="0">
                </div>
                <div class="form-group">
                    <label>üë• Employees</label>
                    <input type="number" id="employees" value="10" min="1">
                </div>
            </div>
        </div>

        <!-- Current Specs Summary -->
        <div id="specs-summary" class="specs-summary">
            <div class="section-title">Current Configuration</div>
            <div class="spec-row">
                <span>Power:</span>
                <strong><span id="spec-power">1</span> MW</strong>
            </div>
            <div class="spec-row">
                <span>Servers:</span>
                <strong><span id="spec-servers">100</span></strong>
            </div>
            <div class="spec-row">
                <span>Size:</span>
                <strong><span id="spec-size">5,000</span> sq ft</strong>
            </div>
            <div class="spec-row">
                <span>Water:</span>
                <strong><span id="spec-water">25</span>k gal/day</strong>
            </div>
        </div>

        <!-- Location Info -->
        <div id="location-display" style="display: none;" class="location-info">
            <strong>üìç Selected Location</strong><br>
            Lat: <span id="lat">-</span>, Lng: <span id="lng">-</span>
        </div>

        <!-- Action Buttons -->
        <button id="analyze-btn" class="analyze-btn" disabled onclick="analyzeImpact()">
            Analyze Impact
        </button>
        <button class="reset-btn" onclick="resetMap()">
            üîÑ Reset
        </button>
        </div>

        <!-- Center Panel: Map -->
        <div class="center-panel">
            <div class="panel-header">
                <h2>üìç Map View</h2>
                <div class="instructions-inline">
                    üí° Click on the map to place a data center
                </div>
            </div>
            <div id="map" class="map-container"></div>
        </div>

        <!-- Right Panel: Report -->
        <div class="right-panel">
            <div class="panel-header">
                <h2>üìä Impact Report</h2>
            </div>
            <div id="report-content" class="report-content">
                <div class="empty-state">
                    <div class="empty-icon">üìã</div>
                    <p>No analysis yet</p>
                    <p class="empty-hint">Select a location and click "Analyze Impact" to see results</p>
                </div>
            </div>
        </div>
        </div>

        <!-- Forecast View -->
        <div id="forecast-view" class="view-container">
            <!-- Forecast Map Panel -->
            <div class="forecast-map-panel">
                <div class="panel-header">
                    <h2>üó∫Ô∏è Forecast Map</h2>
                    <div class="instructions-inline">
                        Visualize future data center impact scenarios
                    </div>
                </div>
                <div id="forecast-map" class="map-container"></div>
            </div>

            <!-- Simulation Settings Panel -->
            <div class="simulation-panel">
                <h2 class="panel-title">‚ö° Simulation Settings</h2>
                <p class="subtitle">Configure forecast parameters</p>

                <!-- Time Horizon -->
                <div class="section">
                    <div class="section-title">Time Horizon</div>
                    <div class="time-grid">
                        <button class="time-btn active" data-years="5">
                            <span class="time-value">5</span>
                            <span class="time-label">Years</span>
                        </button>
                        <button class="time-btn" data-years="10">
                            <span class="time-value">10</span>
                            <span class="time-label">Years</span>
                        </button>
                        <button class="time-btn" data-years="20">
                            <span class="time-value">20</span>
                            <span class="time-label">Years</span>
                        </button>
                    </div>
                </div>

                <!-- Growth Scenario -->
                <div class="section">
                    <div class="section-title">Growth Scenario</div>
                    <div class="scenario-grid">
                        <button class="scenario-btn" data-scenario="conservative">
                            <span class="scenario-icon">üìâ</span>
                            <span class="scenario-name">Conservative</span>
                            <span class="scenario-desc">5% annual growth</span>
                        </button>
                        <button class="scenario-btn active" data-scenario="moderate">
                            <span class="scenario-icon">üìä</span>
                            <span class="scenario-name">Moderate</span>
                            <span class="scenario-desc">15% annual growth</span>
                        </button>
                        <button class="scenario-btn" data-scenario="aggressive">
                            <span class="scenario-icon">üìà</span>
                            <span class="scenario-name">Aggressive</span>
                            <span class="scenario-desc">30% annual growth</span>
                        </button>
                    </div>
                </div>

                <!-- Initial Configuration -->
                <div class="section">
                    <div class="section-title">Initial Data Center Size</div>
                    <div class="preset-grid">
                        <button class="preset-btn active" data-size="small">
                            <span class="name">Small</span>
                            <span class="power">1 MW</span>
                        </button>
                        <button class="preset-btn" data-size="medium">
                            <span class="name">Medium</span>
                            <span class="power">10 MW</span>
                        </button>
                        <button class="preset-btn" data-size="large">
                            <span class="name">Large</span>
                            <span class="power">50 MW</span>
                        </button>
                        <button class="preset-btn" data-size="mega">
                            <span class="name">Mega</span>
                            <span class="power">150 MW</span>
                        </button>
                    </div>
                </div>

                <!-- Environmental Factors -->
                <div class="section">
                    <div class="section-title">Environmental Factors</div>
                    <div class="factor-options">
                        <label class="checkbox-label">
                            <input type="checkbox" checked>
                            <span>Include climate change impact</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" checked>
                            <span>Account for grid improvements</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox">
                            <span>Renewable energy transition</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox">
                            <span>Water scarcity scenarios</span>
                        </label>
                    </div>
                </div>

                <!-- Forecast Summary -->
                <div class="forecast-summary">
                    <div class="section-title">Forecast Summary</div>
                    <div class="summary-row">
                        <span>Time Period:</span>
                        <strong><span id="forecast-years">5</span> years</strong>
                    </div>
                    <div class="summary-row">
                        <span>Growth Rate:</span>
                        <strong><span id="forecast-growth">15</span>% annually</strong>
                    </div>
                    <div class="summary-row">
                        <span>Starting Size:</span>
                        <strong><span id="forecast-size">1</span> MW</strong>
                    </div>
                    <div class="summary-row">
                        <span>Projected Final:</span>
                        <strong><span id="forecast-final">2.0</span> MW</strong>
                    </div>
                </div>

                <!-- Action Buttons -->
                <button id="run-forecast-btn" class="analyze-btn" onclick="runForecast()">
                    üîÆ Run Forecast
                </button>
                <button class="reset-btn" onclick="resetForecast()">
                    üîÑ Reset Forecast
                </button>
            </div>
        </div>

        <!-- About View -->
        <div id="about-view" class="view-container">
            <div class="about-content">
                <h1>About Data Center Impact Analyzer</h1>
                <p>This tool helps analyze and forecast the environmental and economic impact of data centers.</p>
            </div>
        </div>
    </div>

    <!-- Application Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
